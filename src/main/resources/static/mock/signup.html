<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <title>ì„ì‹œ ì¹´ì¹´ì˜¤ ê°€ì…</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 24px; }
        .wrap { max-width: 520px; margin: 0 auto; }
        .row { display: grid; grid-template-columns: 140px 1fr; gap: 10px; margin-bottom: 12px; }
        label { font-weight: 600; }
        input { padding: 10px 12px; border: 1px solid #ddd; border-radius: 8px; width: 100%; }
        button { padding: 10px 14px; border-radius: 8px; border: 0; background: #111827; color: #fff; cursor: pointer; }
        pre { background:#0b1020; color:#d1d5db; padding:12px; border-radius:8px; margin-top:16px; overflow:auto; }
    </style>
</head>
<body>
<div class="wrap">
    <h2>ì„ì‹œ ì¹´ì¹´ì˜¤ ê°€ì…</h2>
    <p>ì´ í˜ì´ì§€ëŠ” ê°’ ê°€ê³µ ì—†ì´ ì…ë ¥ê°’ì„ ê·¸ëŒ€ë¡œ ì„œë²„ë¡œ ë³´ëƒ…ë‹ˆë‹¤.</p>

    <form id="signupForm">
        <div class="row">
            <label for="name">ì´ë¦„</label>
            <input id="name" name="name" />
        </div>

        <div class="row">
            <label for="phone">ì „í™”ë²ˆí˜¸</label>
            <input id="phone" name="phone" placeholder="010-1234-5678 ë“± ììœ  ì…ë ¥" />
        </div>

        <div class="row">
            <label for="residentNum">ì£¼ë¯¼ë²ˆí˜¸(ì•6-ë’¤1)</label>
            <input id="residentNum" name="residentNum" placeholder="ì˜ˆ: 990101-1" />
        </div>

        <div class="row">
            <label for="address">ì£¼ì†Œ</label>
            <input id="address" name="address" />
        </div>

        <div class="row">
            <label for="zipCode">ìš°í¸ë²ˆí˜¸</label>
            <input id="zipCode" name="zipCode" />
        </div>

        <button type="submit">ê°€ì…</button>
    </form>

    <pre id="out">ê²°ê³¼ê°€ ì—¬ê¸°ì— ì¶œë ¥ë©ë‹ˆë‹¤â€¦</pre>
</div>

<script>
    const form = document.getElementById('signupForm');
    const out  = document.getElementById('out');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const payload = {
        name: form.name.value,             // ê°€ê³µ ì—†ì´ ê·¸ëŒ€ë¡œ
        phone: form.phone.value,           // ê°€ê³µ ì—†ì´ ê·¸ëŒ€ë¡œ
        userProfile: {
          residentNum: form.residentNum.value, // ê°€ê³µ ì—†ì´ ê·¸ëŒ€ë¡œ
          address: form.address.value,
          zipCode: form.zipCode.value
        }
      };

      try {
        const res = await fetch('/api/auth/kakao/signupUser', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include', // kakao_signup ì¿ í‚¤ ë™ë´‰
          body: JSON.stringify(payload)
        });

        const text = await res.text();
        out.textContent = res.ok ? ('ê°€ì… ì„±ê³µ ğŸ‰\n' + text) : ('ê°€ì… ì‹¤íŒ¨(' + res.status + ')\n' + text);
      } catch (err) {
        out.textContent = 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ' + (err?.message || err);
      }
    });
</script>
</body>
</html>
